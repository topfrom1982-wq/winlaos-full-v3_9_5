<!DOCTYPE html>
<html lang="lo">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noindex, nofollow">
<title>Winlaos168 | ‡∫ó‡∫≤‡∫á‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫´‡∫º‡∫¥‡ªâ‡∫ô</title>

<!-- ‚úÖ Facebook Pixel -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1337520494718059');
fbq('track', 'PageView');
</script>
<noscript>
  <img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=1337520494718059&ev=PageView&noscript=1"/>
</noscript>

<style>
body {
  margin:0;
  font-family:'Noto Sans Lao','Kanit',sans-serif;
  background:#000;
  color:#fff;
  text-align:center;
}
.container {
  max-width:420px;
  margin:auto;
  padding:20px;
}
.logo {
  width:160px;
  margin-top:60px;
  animation: glowLogo 2s infinite alternate;
}
@keyframes glowLogo {
  from { filter: drop-shadow(0 0 2px #FFD700); }
  to { filter: drop-shadow(0 0 15px #FFD700); }
}
button {
  width:100%;
  border:none;
  border-radius:14px;
  padding:16px;
  font-size:1.1rem;
  font-weight:600;
  cursor:pointer;
  margin-top:20px;
  transition:all 0.25s ease;
}
#enterBtn {
  background:linear-gradient(90deg,#FFD700,#E6B800);
  color:#000;
  box-shadow:0 0 10px #FFD70060;
}
#contactBtn {
  background:linear-gradient(90deg,#1877F2,#0e5dc7);
  color:#fff;
  box-shadow:0 0 10px #1877F260;
}
#enterBtn:hover, #contactBtn:hover {
  transform:scale(1.06);
}
footer {
  margin:40px 0 20px;
  font-size:0.8rem;
  color:#777;
}

/* ‚úÖ Popup */
.popup-overlay {
  display:none;
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.8);
  justify-content:center;
  align-items:center;
  z-index:999;
  animation:fadeIn 0.4s ease forwards;
}
@keyframes fadeIn {
  from {opacity:0;}
  to {opacity:1;}
}
.popup {
  background:#111;
  border:1px solid #FFD70080;
  border-radius:16px;
  padding:25px 20px;
  width:80%;
  max-width:340px;
  box-shadow:0 0 25px #FFD70060;
  animation:popupGlow 2s infinite alternate;
}
@keyframes popupGlow {
  from { box-shadow:0 0 10px #FFD70040; }
  to { box-shadow:0 0 25px #FFD700A0; }
}
.popup h2 {
  color:#FFD700;
  margin-bottom:15px;
  font-weight:600;
}
.popup input {
  width:85%;
  padding:10px;
  border-radius:8px;
  border:1px solid #FFD70080;
  background:#000;
  color:#fff;
  margin-bottom:15px;
  text-align:center;
}
#winlaos_confirm {
  background:linear-gradient(90deg,#FFD700,#E6B800);
  color:#000;
  font-weight:bold;
  box-shadow:0 0 15px #FFD70080;
  cursor:pointer;
}
#winlaos_close {
  background:#333;
  color:#fff;
  margin-top:8px;
  cursor:pointer;
}
</style>
</head>
<body>
<div class="container">
  <img src="images/logo.webp" alt="Winlaos168" class="logo">
  <h1>‡∫ç‡∫¥‡∫ô‡∫î‡∫µ‡∫ï‡ªâ‡∫≠‡∫ô‡∫Æ‡∫±‡∫ö‡∫™‡∫π‡ªà <span style="color:#FFD700">Winlaos168</span> üé∞</h1>
  <button id="enterBtn" data-click-sound>üé∞ ‡∫ó‡∫≤‡∫á‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫´‡∫º‡∫¥‡ªâ‡∫ô</button>
  <button id="contactBtn" data-click-sound onclick="window.open('https://m.me/262413013632590', '_blank')">üí¨ ‡∫ï‡∫¥‡∫î‡∫ï‡ªç‡ªà‡ªÅ‡∫≠‡∫î‡∫°‡∫¥‡∫ô</button>
  <footer>¬© 2025 Winlaos168. All rights reserved.</footer>
</div>

<!-- ‚úÖ Popup -->
<div class="popup-overlay" id="popupOverlay">
  <div class="popup">
    <h2>‡ªÉ‡∫™‡ªà‡ªÄ‡∫ö‡∫µ‡ªÇ‡∫ó ‡ªÅ‡∫•‡∫∞ ‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫ù‡∫≤‡∫Å‡∫Ñ‡∫±‡ªâ‡∫á‡∫ó‡∫≥‡∫≠‡∫¥‡∫î</h2>
    <input 
      type="tel" 
      id="winlaos_phone" 
      value="020" 
      maxlength="11"
      inputmode="numeric"
      oninput="if(!this.value.startsWith('020')) this.value='020'+this.value.replace(/[^0-9]/g,'').replace(/^0+/,''); if(this.value.length>11) this.value=this.value.slice(0,11);"
      readonly
      onfocus="this.removeAttribute('readonly'); setTimeout(()=>this.setSelectionRange(this.value.length,this.value.length),0);"
      placeholder="‡ªÄ‡∫ö‡∫µ‡ªÇ‡∫ó‡∫•‡∫∞‡∫™‡∫±‡∫ö"
    >
    <input 
      type="number" 
      id="winlaos_deposit" 
      placeholder="‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫ù‡∫≤‡∫Å‡∫Ñ‡∫±‡ªâ‡∫á‡∫ó‡∫≥‡∫≠‡∫¥‡∫î (‡∫Å‡∫µ‡∫ö)"
      min="10000" step="1000"
    >
    <button id="winlaos_confirm" data-click-sound>‡∫¢‡∫∑‡∫ô‡∫¢‡∫±‡∫ô</button>
    <button id="winlaos_close" data-click-sound>‡∫õ‡∫¥‡∫î</button>
  </div>
</div>

<script>
// ‚úÖ Global click sound
(function () {
  const sound = new Audio("/sounds/click.mp3");
  sound.preload = "auto";
  function playClickSound() {
    try {
      const clone = sound.cloneNode();
      clone.volume = 0.9;
      clone.play().catch(() => {});
    } catch (err) {
      console.warn("Click sound error:", err);
    }
  }
  document.addEventListener("click", (e) => {
    const btn = e.target.closest("[data-click-sound]");
    if (btn) playClickSound();
  });
})();

(() => {
  const PIXEL_ID = "1337520494718059";
  const REDIRECT_URL = "https://mvpatm.pro";

  const popup = document.getElementById("popupOverlay");
  const enterBtn = document.getElementById("enterBtn");
  const confirmBtn = document.getElementById("winlaos_confirm");
  const closeBtn = document.getElementById("winlaos_close");
  const phoneInput = document.getElementById("winlaos_phone");

  // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á popup ‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
  const POPUP_KEY = "winlaos_popup_shown";
  const hasSeenPopup = localStorage.getItem(POPUP_KEY) === "1";

  enterBtn.onclick = ()=> {
    if (!hasSeenPopup) {
      popup.style.display="flex";
    } else {
      window.location.href = REDIRECT_URL;
    }
  };
  closeBtn.onclick = ()=> popup.style.display="none";

  async function sha256(message) {
    const msgBuffer = new TextEncoder().encode(message);
    const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer);
    return Array.from(new Uint8Array(hashBuffer)).map(b => b.toString(16).padStart(2,"0")).join("");
  }

  function getCookie(name) {
    const match = document.cookie.match(new RegExp(name + '=([^;]+)'));
    return match ? match[1] : null;
  }

  async function sendMetaEvent(phone, depositAmount) {
    if (sessionStorage.getItem("event_sent") === "1") return;
    sessionStorage.setItem("event_sent", "1");

    if (phone.startsWith("020")) phone = "856" + phone.substring(1);
    const eventTime = Math.floor(Date.now()/1000);
    const hashedPhone = await sha256(phone.trim());
    const fbp = getCookie('_fbp');
    const fbc = getCookie('_fbc');
    const eventId = 'evt_'+Date.now()+'_'+Math.random().toString(36).substring(2,8);

    const userData = { ph:hashedPhone, external_id:hashedPhone, fbc, fbp, client_user_agent:navigator.userAgent };
    const payload = { data:[{ event_name:"Purchase", event_time:eventTime, event_id:eventId, action_source:"website", event_source_url:window.location.href, user_data:userData, custom_data:{ currency:"USD", value:parseFloat(depositAmount) } }] };

    try {
      const res = await fetch("https://winlaos-capi-proxy.click18up.workers.dev", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({ pixel: PIXEL_ID, payload })
      });
      fbq('track','Purchase',{ currency:"USD", value:parseFloat(depositAmount), event_id:eventId });
      console.log(`‚úÖ Sent to Worker Proxy ‚Üí Pixel ${PIXEL_ID}:`, await res.text());
    } catch(err) { console.error("‚ùå Error sending event:", err); }
  }

  confirmBtn.onclick = async ()=>{
    let phone = phoneInput.value.trim();
    let deposit = document.getElementById("winlaos_deposit").value.trim();
    if (!phone.startsWith("020")) phone="020"+phone.replace(/^0+/,"");
    if (!phone.match(/^020[0-9]{6,8}$/)) return alert("‚ö†Ô∏è ‡ªÉ‡∫™‡ªà‡ªÄ‡∫ö‡∫µ‡ªÉ‡∫´‡ªâ‡∫ñ‡∫∑‡∫Å‡∫ï‡ªâ‡∫≠‡∫á!");
    if (!deposit || isNaN(deposit) || deposit<10000) return alert("‚ö†Ô∏è ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫ù‡∫≤‡∫Å‡∫ó‡∫µ‡ªà‡∫ñ‡∫∑‡∫Å‡∫ï‡ªâ‡∫≠‡∫á!");

    popup.style.display="none";
    confirmBtn.disabled=true;
    confirmBtn.innerText="‡∫Å‡∫≥‡∫•‡∫±‡∫á‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤...";

    const depositAmount=(deposit/20000).toFixed(2);
    await sendMetaEvent(phone, depositAmount);

    // ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡πà‡∏≤ popup ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏•‡πâ‡∏ß
    localStorage.setItem(POPUP_KEY, "1");

    setTimeout(()=>window.location.href=REDIRECT_URL,1500);
  };
})();
</script>
</body>
</html>
