<!DOCTYPE html>
<html lang="lo">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Winlaos168 | ‡∫ó‡∫≤‡∫á‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫´‡∫º‡∫¥‡ªâ‡∫ô</title>

<!-- ‚úÖ Facebook Pixel -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');

fbq('init', '1119119273700263'); // ‚úÖ Pixel ID ‡∏Ç‡∏≠‡∏á Top
fbq('track', 'PageView');
</script>
<noscript>
  <img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=1119119273700263&ev=PageView&noscript=1"/>
</noscript>
<!-- ‚úÖ End Pixel -->

<style>
body {
  margin: 0;
  font-family: 'Noto Sans Lao', 'Kanit', sans-serif;
  background: radial-gradient(circle at top, #0a0a0a, #000);
  color: #fff;
  text-align: center;
}
.container {
  max-width: 420px;
  margin: 0 auto;
  padding: 20px;
}
.logo {
  width: 180px;
  margin-top: 50px;
  animation: fadeDown 1s ease;
}
h1 {
  color: #FFD700;
  font-size: 1.4rem;
  margin-top: 15px;
  text-shadow: 0 0 15px #ffb30080;
}
button {
  width: 100%;
  border: none;
  border-radius: 14px;
  padding: 16px;
  font-size: 1.2rem;
  font-weight: 600;
  cursor: pointer;
  margin-top: 25px;
  transition: all 0.25s ease;
}
#enterBtn {
  background: linear-gradient(90deg, #FFD700, #E6B800);
  color: #000;
  box-shadow: 0 0 20px #FFD70080;
}
#enterBtn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 40px #FFD700aa;
}
#contactBtn {
  background: linear-gradient(90deg, #1877F2, #0e5dc7);
  color: #fff;
  box-shadow: 0 0 20px #1877F260;
}
#contactBtn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 40px #1b8affaa;
}
footer {
  margin: 40px 0 20px;
  font-size: 0.8rem;
  color: #777;
}
.popup-overlay {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.85);
  backdrop-filter: blur(4px);
  justify-content: center;
  align-items: center;
  z-index: 10;
}
.popup {
  background: radial-gradient(circle at top, #1a1a1a, #000);
  border: 1px solid rgba(255,215,0,0.3);
  border-radius: 16px;
  padding: 25px 20px;
  width: 85%;
  max-width: 360px;
  box-shadow: 0 0 30px #FFD70040, inset 0 0 25px #FFD70015;
  text-align: center;
  animation: fadeUp 0.4s ease;
}
.popup h2 {
  color: #FFD700;
  font-size: 1.1rem;
  margin-bottom: 15px;
}
.popup input {
  width: 85%;
  padding: 10px;
  border: 1px solid #FFD70090;
  border-radius: 10px;
  font-size: 1rem;
  text-align: center;
  background: #111;
  color: #fff;
  outline: none;
  margin-bottom: 15px;
}
.popup input:focus {
  border-color: #FFD700;
  box-shadow: 0 0 10px #FFD70060;
}
.popup button {
  width: 80%;
  background: linear-gradient(90deg, #FFD700, #E6B800);
  color: #000;
  font-weight: bold;
  box-shadow: 0 0 20px #FFD70060;
  margin-top: 10px;
  border: none;
  border-radius: 10px;
  padding: 12px;
  cursor: pointer;
}
#closePopup {
  background: #333;
  color: #fff;
  box-shadow: none;
}
@keyframes fadeDown {from {opacity:0;transform:translateY(-20px);} to {opacity:1;transform:translateY(0);}}
@keyframes fadeUp {from {opacity:0;transform:translateY(20px);} to {opacity:1;transform:translateY(0);}}
</style>
</head>
<body>
<div class="container">
  <img src="images/logo.webp" alt="Winlaos168" class="logo">
  <h1>‡∫ç‡∫¥‡∫ô‡∫î‡∫µ‡∫ï‡ªâ‡∫≠‡∫ô‡∫Æ‡∫±‡∫ö‡∫™‡∫π‡ªà Winlaos168 üé∞<br>‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤‡∫ó‡∫µ‡ªà‡∫ù‡∫≤‡∫Å‡ªÅ‡∫•‡ªâ‡∫ß‡∫Å‡∫ª‡∫î‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡ªÄ‡∫•‡∫µ‡∫ç!</h1>
  <button id="enterBtn">üé∞ ‡∫ó‡∫≤‡∫á‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫´‡∫º‡∫¥‡ªâ‡∫ô</button>
  <button id="contactBtn">üí¨ ‡∫ï‡∫¥‡∫î‡∫ï‡ªç‡ªà‡ªÅ‡∫≠‡∫î‡∫°‡∫¥‡∫ô</button>
  <footer>¬© 2025 Winlaos168. All rights reserved.</footer>
</div>

<!-- ‚úÖ Popup -->
<div class="popup-overlay" id="popupOverlay">
  <div class="popup">
    <h2>‡ªÉ‡∫™‡ªà‡ªÄ‡∫ö‡∫µ‡ªÇ‡∫ó‡∫Ç‡∫≠‡∫á‡∫ó‡ªà‡∫≤‡∫ô‡ªÄ‡∫û‡∫∑‡ªà‡∫≠‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫´‡∫º‡∫¥‡ªâ‡∫ô</h2>
    <input type="tel" id="phoneInput" value="020" maxlength="11">
    <button id="confirmBtn">‡∫¢‡∫∑‡∫ô‡∫¢‡∫±‡∫ô</button>
    <button id="closePopup">‡∫õ‡∫¥‡∫î</button>
  </div>
</div>

<script>
const PIXEL_ID = "1119119273700263";
const ACCESS_TOKEN = "EAAP0Y2nQyVgBP0e1TeZBYgFydKOzWteWbOoVUHmoASUrSMSrCwFLxkxS26qn3UiM4oeZADTWMTpZBXyuda8CUZAyqUEwZBtrHXVZABAoDJHKmG5PKTTPSlvO9JHyEZC3BYqZB3N61kxwHujL1SIVKxkY1URe9ZCHHb8Hslo4qVnPPWWagpgIWXXcSPuB1FJwdEFkr7AZDZD";

// üì¶ ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ fbc / fbp ‡∏à‡∏≤‡∏Å Cookie
function getCookie(name) {
  const match = document.cookie.match(new RegExp("(^| )" + name + "=([^;]+)"));
  return match ? match[2] : null;
}
const fbc = getCookie("_fbc");
const fbp = getCookie("_fbp");

// üîê ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô SHA-256 (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)
async function sha256(message) {
  const msgBuffer = new TextEncoder().encode(message);
  const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
}

// üöÄ ‡∏¢‡∏¥‡∏á Event ‡πÄ‡∏Ç‡πâ‡∏≤ Facebook
async function sendMetaEvent(phone) {
  const eventTime = Math.floor(Date.now() / 1000);
  const userData = {
    ph: phone ? await sha256(phone.trim().toLowerCase()) : undefined,
    fbc: fbc || undefined,
    fbp: fbp || undefined,
    country: "LA"
  };
  const payload = {
    data: [{
      event_name: "Purchase",
      event_time: eventTime,
      action_source: "website",
      event_source_url: window.location.href,
      user_data: userData,
      custom_data: { value: 1, currency: "LAK", status: "deposit_confirmed" }
    }]
  };
  try {
    const res = await fetch(`https://graph.facebook.com/v18.0/${PIXEL_ID}/events?access_token=${ACCESS_TOKEN}`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });
    console.log("‚úÖ Event Sent:", await res.json());
  } catch (err) {
    console.error("‚ùå Send Event Error:", err);
  }
}

// üéØ Logic ‡∏´‡∏•‡∏±‡∏Å
document.addEventListener("DOMContentLoaded", () => {
  const enterBtn = document.getElementById("enterBtn");
  const contactBtn = document.getElementById("contactBtn");
  const popupOverlay = document.getElementById("popupOverlay");
  const confirmBtn = document.getElementById("confirmBtn");
  const closePopup = document.getElementById("closePopup");
  const phoneInput = document.getElementById("phoneInput");

  const savedPhone = localStorage.getItem("winlaos_phone");

  enterBtn.addEventListener("click", async () => {
    if (savedPhone) {
      await sendMetaEvent(savedPhone);
      window.location.href = "https://mvpatm.pro";
    } else {
      popupOverlay.style.display = "flex";
      setTimeout(() => phoneInput.focus(), 200);
    }
  });

  confirmBtn.addEventListener("click", async () => {
    let phone = phoneInput.value.trim();
    if (!phone.startsWith("020")) phone = "020" + phone.replace(/^0+/, "");
    if (!phone.match(/^020[0-9]{6,8}$/)) {
      alert("‚ö†Ô∏è ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡ªÄ‡∫ö‡∫µ‡ªÉ‡∫´‡ªâ‡∫ñ‡∫∑‡∫Å‡∫ï‡ªâ‡∫≠‡∫á (‡ªÄ‡∫•‡∫µ‡ªà‡∫°‡∫î‡ªâ‡∫ß‡∫ç 020)");
      return;
    }
    localStorage.setItem("winlaos_phone", phone);
    await sendMetaEvent(phone);
    popupOverlay.style.display = "none";
    alert("‚úÖ ‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡ªÄ‡∫ö‡∫µ‡∫™‡∫≥‡ªÄ‡∫•‡∫±‡∫î! ‡∫Å‡∫ª‡∫î‡∫ó‡∫≤‡∫á‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫´‡∫º‡∫¥‡ªâ‡∫ô‡ªÑ‡∫î‡ªâ‡ªÄ‡∫•‡∫µ‡∫ç");
  });

  closePopup.addEventListener("click", () => popupOverlay.style.display = "none");
  contactBtn.addEventListener("click", () => window.open("https://m.me/262413013632590", "_blank"));
});
</script>
</body>
</html>
